- hosts: localhost
  vars_files:
    - host_vars/research_cloud.yaml
  gather_facts: true

  roles:
    - role: openstack-volume
    - role: openstack-security-group
    - role: openstack-instance

# Install Docker and CouchDB
- hosts: TwitterMining
  vars_files:
    - host_vars/couchdb.yaml
  gather_facts: true

  roles:
    - role: nodes-common
    - role: nodes-docker-install
    - role: nodes-volume-mount
    - role: couchdb-setup

 # Perform CouchDB configuration on all hosts except Masternode
- hosts: TwitterMining:!Masternode
  vars_files:

    - host_vars/couchdb.yaml
  gather_facts: true

  roles:
    - role: couchdb-finish-setup


# Install Twitter Harvester on all hosts
- hosts: TwitterMining
  vars_files:
    - host_vars/twitter_harvester.yaml
  gather_facts: true

  roles:
    - role: twitter-harvester-setup